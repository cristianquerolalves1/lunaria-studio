<!-- Botón del menú hamburguesa -->
<button
  id="hamburger-btn"
  aria-label="Abrir menú"
  class="relative z-[60] flex flex-col justify-center items-center
         w-12 h-12 md:w-14 md:h-14 rounded-xl
         backdrop-blur-xl bg-white/25 dark:bg-black/25
         border border-white/30 dark:border-white/10
         shadow-[0_0_25px_rgba(255,255,255,0.2)]
         transition-all duration-500 hover:scale-110 active:scale-95"
>
  <span
    class="bar block w-6 h-[2px] bg-black dark:bg-white rounded-full transition-all duration-500 ease-in-out"
  ></span>
  <span
    class="bar block w-6 h-[2px] bg-black dark:bg-white rounded-full mt-1.5 transition-all duration-500 ease-in-out"
  ></span>
  <span
    class="bar block w-6 h-[2px] bg-black dark:bg-white rounded-full mt-1.5 transition-all duration-500 ease-in-out"
  ></span>
</button>

<!-- Overlay (capa de desenfoque del fondo real) -->
<div
  id="menu-overlay"
  class="fixed inset-0 z-[49] backdrop-blur-3xl bg-black/40 dark:bg-black/60 opacity-0 pointer-events-none transition-opacity duration-700"
></div>

<!-- Menú móvil -->
<nav
  id="mobile-menu"
  class="fixed inset-0 z-[50] flex flex-col items-center justify-center gap-10 text-2xl
         font-medium text-black dark:text-white
         bg-gradient-to-br from-white/80 to-gray-100/70 dark:from-gray-900/85 dark:to-black/80
         border-t border-white/20 dark:border-white/10
         shadow-[0_0_60px_rgba(0,0,0,0.25)]
         scale-95 opacity-0 pointer-events-none
         transition-all duration-700 ease-[cubic-bezier(0.68,-0.55,0.27,1.55)]"
>
  <a href="#hero-section" class="menu-link">Inicio</a>
  <a href="#services-section" class="menu-link">Servicios</a>
  <a href="#pricing-section" class="menu-link">Planes</a>
  <a href="#contact-section" class="menu-link">Contacto</a>
</nav>

<style is:global>
  /* Animación escalonada de los links */
  .menu-link {
    opacity: 0;
    transform: translateY(10px);
    transition: opacity 0.4s ease, transform 0.4s ease;
  }
  .menu-link.show {
    opacity: 1;
    transform: translateY(0);
  }
</style>

<script is:inline>
  const btn = document.getElementById("hamburger-btn");
  const bars = btn.querySelectorAll(".bar");
  const menu = document.getElementById("mobile-menu");
  const overlay = document.getElementById("menu-overlay");
  const links = menu.querySelectorAll(".menu-link");
  let open = false;

  const toggleMenu = (show) => {
    if (show) {
      // Animar icono a “X”
      bars[0].style.transform = "translateY(8px) rotate(45deg)";
      bars[1].style.opacity = "0";
      bars[2].style.transform = "translateY(-8px) rotate(-45deg)";
      
      // Mostrar fondo borroso real
      overlay.style.opacity = "1";
      overlay.style.pointerEvents = "auto";

      // Mostrar menú con animación
      menu.style.opacity = "1";
      menu.style.transform = "scale(1)";
      menu.style.pointerEvents = "auto";

      // Animar links escalonadamente
      links.forEach((link, i) => {
        setTimeout(() => link.classList.add("show"), i * 100 + 150);
      });
    } else {
      // Restaurar icono
      bars[0].style.transform = "translateY(0) rotate(0)";
      bars[1].style.opacity = "1";
      bars[2].style.transform = "translateY(0) rotate(0)";

      // Ocultar fondo borroso
      overlay.style.opacity = "0";
      overlay.style.pointerEvents = "none";

      // Ocultar menú
      menu.style.opacity = "0";
      menu.style.transform = "scale(0.95)";
      menu.style.pointerEvents = "none";

      // Ocultar links
      links.forEach((link) => link.classList.remove("show"));
    }
  };

  btn.addEventListener("click", () => {
    open = !open;
    toggleMenu(open);
  });

  // Cerrar menú al hacer click en un enlace
  links.forEach((link) =>
    link.addEventListener("click", () => {
      open = false;
      toggleMenu(false);
    })
  );
</script>
