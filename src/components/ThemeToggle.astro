---
const clientOnly = true;
---

<button
  id="theme-toggle"
  aria-label="Cambiar tema"
  class="fixed top-6 right-20 z-50 group w-12 h-12 md:w-14 md:h-14 rounded-full
         backdrop-blur-xl bg-white/20 dark:bg-black/20
         border border-white/40 dark:border-black/40
         shadow-[0_0_25px_rgba(255,255,255,0.2)] 
         flex items-center justify-center overflow-hidden
         transition-all duration-700 hover:scale-110 hover:rotate-12"
>
  <!-- Sol -->
  <span
    id="theme-sun"
    class="absolute w-6 h-6 md:w-8 md:h-8 bg-yellow-400 rounded-full 
           shadow-[0_0_25px_rgba(250,204,21,0.8)]
           transition-all duration-700 ease-in-out"
  ></span>

  <!-- Luna -->
  <span
    id="theme-moon"
    class="absolute w-6 h-6 md:w-8 md:h-8 bg-gradient-to-b from-slate-300 to-slate-700 rounded-full
           shadow-[0_0_25px_rgba(148,163,184,0.6)] opacity-0
           transition-all duration-700 ease-in-out"
  ></span>

  <!-- Aura de color -->
  <div
    class="absolute inset-0 opacity-0 group-hover:opacity-100 
           bg-[radial-gradient(circle_at_30%_30%,rgba(56,189,248,0.3),transparent_70%),radial-gradient(circle_at_70%_70%,rgba(236,72,153,0.3),transparent_70%)]
           blur-xl transition-opacity duration-700"
  ></div>
</button>

<script is:inline>
  const root = document.documentElement;
  const toggle = document.getElementById("theme-toggle");
  const sun = document.getElementById("theme-sun");
  const moon = document.getElementById("theme-moon");

  function updateToggle(isDark) {
    if (isDark) {
      sun.style.opacity = "0";
      moon.style.opacity = "1";
      moon.style.transform = "rotate(360deg) scale(1)";
      sun.style.transform = "rotate(-180deg) scale(0)";
    } else {
      sun.style.opacity = "1";
      moon.style.opacity = "0";
      sun.style.transform = "rotate(360deg) scale(1)";
      moon.style.transform = "rotate(-180deg) scale(0)";
    }
  }

  // Cargar tema guardado
  const savedTheme = localStorage.getItem("theme");
  if (savedTheme === "dark") root.classList.add("dark");
  else if (savedTheme === "light") root.classList.remove("dark");

  updateToggle(root.classList.contains("dark"));

  toggle.addEventListener("click", () => {
    root.classList.toggle("dark");
    const newIsDark = root.classList.contains("dark");
    localStorage.setItem("theme", newIsDark ? "dark" : "light");
    updateToggle(newIsDark);
  });
</script>
